<!DOCTYPE html>

<html>

<head>
    <title>TwitchApp.js</title>
    <meta lang="en-US" />
    <link href="global.css" rel="stylesheet" />
</head>




<body>
    <div class="homesite-content">
        <div class="homesite-titlebar">
            <a class="homesite-title" href="/">
                <h1>ttvbox.js</h1>
            </a>
        </div>
        <h2>Test Toolbox</h2>
        <p>
            You can use the Test Toolbox to test different aspects of your theme, your OBS config or just the entirety
            of the ttvbox.js app
        </p>

        <h3 class="homesite-header">General</h3>
        <a href="/test?type=CONNECT">Connect</a><br>

        <h3 class="homesite-header">Chat</h3>
        <a href="/test?type=MESSAGE">Connect</a>

        <h3 class="homesite-header">Alertbox</h3>
        <a href="/test?type=FOLLOW">Follow</a><br>
        <a href="/test?type=BITCHEER">Bit Cheer</a>

        <h3 class="homesite-header">StreamSim</h3>
        <a href="#" id="ssimbtn">Enable</a>


    </div>
    <script>
        var enabled = false;

        function chat() {
            if (!enabled) return;

            fetch("/test?type=CHAT");

            setTimeout(() => chat(), Math.random() * 2000);
        }

        function follow() {
            if (!enabled) return;
            fetch("/test?type=FOLLOW");
            setTimeout(() => follow(), Math.random() * 30000);
        }

        function startsim() {
            enabled = true;
            setTimeout(() => chat(), 100);
            setTimeout(() => follow(), 1000);
            document.getElementById("ssimbtn").innerHTML = "Disable";

        }

        function stopsim() {
            enabled = false;
            document.getElementById("ssimbtn").innerHTML = "Enable";

        }

        document.getElementById("ssimbtn").onclick = ((e) => {
            if (enabled) stopsim(); else startsim();
        });
    </script>
</body>

</html>